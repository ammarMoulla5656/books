# โ ูุธุงู ุชุชุจุน ุงูุฒูุงุฑ | Visitor Tracking System

**ุงูุชุงุฑูุฎ**: 3 ููุงูุฑ 2026

---

## ๐ ููุฎุต ุงูุชุทุจูู

ุชู ุชุทุจูู ูุธุงู ุชุชุจุน ุดุงูู ููุฒูุงุฑ ูู ุงูููุชุจุฉ ุงูุฅุณูุงููุฉุ ูููู ุจุชุณุฌูู ุฌููุน ุงูุฒูุงุฑุงุช ูุงูุฃูุดุทุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุนุฑุถูุง ูู ููุญุฉ ุงูุชุญูู.

---

## ๐๏ธ ุงูููููุงุช ุงูุฃุณุงุณูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### A. ุฌุฏูู `VisitorLog`
ูุณุฌู ูู ุฒูุงุฑุฉ ุฃู ูุดุงุท ูุฑุฏู:

```prisma
model VisitorLog {
  id          String   @id @default(cuid())
  sessionId   String   // ูุนุฑู ุงูุฌูุณุฉ ุงููุฑูุฏ
  ipAddress   String?  // ุนููุงู IP
  userAgent   String?  // ูุนูููุงุช ุงููุชุตูุญ
  page        String?  // ุงูุตูุญุฉ ุงููุฒุงุฑุฉ
  action      String?  // ููุน ุงููุดุงุท (page_view, bookmark, etc.)
  timestamp   DateTime @default(now())
}
```

**ุงุณุชุฎุฏุงูุงุช**:
- ุชุชุจุน ูู ุฒูุงุฑุฉ ุตูุญุฉ
- ูุนุฑูุฉ ุงูุตูุญุงุช ุงูุฃูุซุฑ ุฒูุงุฑุฉ
- ุชุญููู ุณููู ุงููุณุชุฎุฏููู
- ุฅุญุตุงุกุงุช ูู ุงูููุช ุงููุนูู

#### B. ุฌุฏูู `DailyStats`
ุฅุญุตุงุฆูุงุช ููููุฉ ูุฌููุนุฉ:

```prisma
model DailyStats {
  id              String   @id @default(cuid())
  date            DateTime @unique
  uniqueVisitors  Int      @default(0)  // ุนุฏุฏ ุงูุฒูุงุฑ ุงููุฑูุฏูู
  totalPageViews  Int      @default(0)  // ุฅุฌูุงูู ูุดุงูุฏุงุช ุงูุตูุญุงุช
  newBooks        Int      @default(0)  // ูุชุจ ุฌุฏูุฏุฉ
  newBookmarks    Int      @default(0)  // ุนูุงูุงุช ูุฑุฌุนูุฉ ุฌุฏูุฏุฉ
}
```

**ููุงุฆุฏ**:
- ุฃุฏุงุก ุฃูุถู ููุงุณุชุนูุงูุงุช
- ุนุฑุถ ุณุฑูุน ููุฅุญุตุงุฆูุงุช
- ุชูููู ุงูุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ง ุงูุชุทุจูู ุงูุชููู

### 2. API Endpoint ููุชุชุจุน

**ุงููุณุงุฑ**: `/api/visitor/track/route.ts`

```typescript
POST /api/visitor/track
{
  "page": "/books/123",
  "action": "page_view"
}
```

**ุงููุธุงุฆู**:
1. ุฅูุดุงุก ุฃู ุงุณุชุฑุฌุงุน ูุนุฑู ุงูุฌูุณุฉ (session ID)
2. ุชุณุฌูู ุงูุฒูุงุฑุฉ ูู `VisitorLog`
3. ุชุญุฏูุซ `DailyStats` ุชููุงุฆูุงู
4. ุญุณุงุจ ุงูุฒูุงุฑ ุงููุฑูุฏูู ููููู
5. ุฅุฑุฌุงุน ูุนุฑู ุงูุฌูุณุฉ ููุชุฎุฒูู ูู Cookie

**ุงูุฃูุงู**:
- ุงุณุชุฎุฏุงู cookies ุขููุฉ (httpOnly)
- ุชุณุฌูู ุนููุงู IP ุจุดูู ุขูู
- ูุนุฑู ุฌูุณุฉ ูุฑูุฏ ููู ุฒุงุฆุฑ

---

### 3. Custom Hook ููุชุชุจุน

**ุงููุณุงุฑ**: `/lib/useVisitorTracking.ts`

```typescript
useVisitorTracking(page: string, action: string = 'page_view')
```

**ุงูุงุณุชุฎุฏุงู**:
```typescript
// ูู ุฃู ุตูุญุฉ
import { useVisitorTracking } from '@/lib/useVisitorTracking';

export default function MyPage() {
  useVisitorTracking('/my-page', 'page_view');
  // ...
}
```

**ุงููููุฒุงุช**:
- ุชุชุจุน ุชููุงุฆู ุนูุฏ ุฏุฎูู ุงูุตูุญุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ุตุงูุช (ูุง ูุนุทู ุงูุชุทุจูู)
- ุชุฎุฒูู ูุนุฑู ุงูุฌูุณุฉ ูู Cookie ุชููุงุฆูุงู
- ุณูู ุงูุงุณุชุฎุฏุงู ูุงูุชุทุจูู

---

### 4. API Endpoint ููุฅุญุตุงุฆูุงุช

**ุงููุณุงุฑ**: `/api/analytics/route.ts`

**ุงูุชุญุฏูุซุงุช ุงูุฑุฆูุณูุฉ**:

#### ูุจู ุงูุชุญุฏูุซ โ
```typescript
// ุจูุงูุงุช ููููุฉ ุซุงุจุชุฉ
const dailyStats = [
  { date: '..', visitors: Math.random() * 200 }
];
const totalVisitors = 15234; // ุฑูู ุซุงุจุช
```

#### ุจุนุฏ ุงูุชุญุฏูุซ โ
```typescript
// ุจูุงูุงุช ุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
const allVisitors = await prisma.visitorLog.findMany({
  select: { sessionId: true },
  distinct: ['sessionId'],
});

const dailyStatsData = await prisma.dailyStats.findMany({
  where: { date: { gte: weekAgo } },
  orderBy: { date: 'asc' },
});
```

**ุงูุจูุงูุงุช ุงููุชููุฑุฉ ุงูุขู**:

1. **ุฅุฌูุงูู ุงูุฒูุงุฑ**: ุนุฏุฏ ุงูุฌูุณุงุช ุงููุฑูุฏุฉ ูู ุฃูู ุงุณุชุฎุฏุงู
2. **ุฒูุงุฑ ุงูููู**: ุงูุฒูุงุฑ ุงููุฑูุฏูู ุฎูุงู ุขุฎุฑ 24 ุณุงุนุฉ
3. **ุฒูุงุฑ ุงูุฃุณุจูุน**: ุงูุฒูุงุฑ ุฎูุงู ุขุฎุฑ 7 ุฃูุงู
4. **ุฒูุงุฑ ุงูุดูุฑ**: ุงูุฒูุงุฑ ุฎูุงู ุขุฎุฑ 30 ูููุงู
5. **ุงูุฅุญุตุงุฆูุงุช ุงูููููุฉ**: ุจูุงูุงุช ููุตูุฉ ูุขุฎุฑ 7 ุฃูุงู
6. **ุงููุชุจ ุงูุฃูุซุฑ ูุดุงูุฏุฉ**: ูู ุจูุงูุงุช `VisitorLog`
7. **ุงููุดุงุท ุงูุฃุฎูุฑ**: ุขุฎุฑ 10 ุฃุญุฏุงุซ ูุณุฌูุฉ

---

## ๐ฑ ุงูุตูุญุงุช ุงููุชุชุจุนุฉ

ุชู ุฅุถุงูุฉ ุงูุชุชุจุน ูุฌููุน ุตูุญุงุช ุงููุณุชุฎุฏููู:

### 1. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`app/page.tsx`)
```typescript
useVisitorTracking('/', 'page_view');
```

### 2. ุตูุญุฉ ุงููุชุงุจ (`app/books/[id]/page.tsx`)
```typescript
useVisitorTracking(`/books/${params.id}`, 'page_view');
```

### 3. ุตูุญุฉ ูู ูุญู (`app/about/page.tsx`)
```typescript
useVisitorTracking('/about', 'page_view');
```

### 4. ุตูุญุฉ ุงุชุตู ุจูุง (`app/contact/page.tsx`)
```typescript
useVisitorTracking('/contact', 'page_view');
```

### 5. ุตูุญุฉ ุงูุนูุงูุงุช ุงููุฑุฌุนูุฉ (`app/bookmarks/page.tsx`)
```typescript
useVisitorTracking('/bookmarks', 'page_view');
```

---

## ๐ ููุญุฉ ุงูุชุญูู - Analytics Dashboard

**ุงููุณุงุฑ**: `/secret-admin-panel-xyz/analytics`

### ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ:

#### 1. ุงูุฅุญุตุงุฆูุงุช ุงูุฑุฆูุณูุฉ
- **ุฅุฌูุงูู ุงูุฒูุงุฑ**: ูู ุจุฏุงูุฉ ุงูุชุดุบูู
- **ุฒูุงุฑ ุงูููู**: ูุน ุนุฏุฏ ุงููุดุทูู ุญุงููุงู (ุชูุฏูุฑ)
- **ุฅุฌูุงูู ุงููุชุจ**: ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ูุชูุณุท ููุช ุงููุฑุงุกุฉ**: ูุญุณูุจ ูู ุงูุฌูุณุงุช

#### 2. ุงูุฅุญุตุงุฆูุงุช ุงูููููุฉ (ุงูุฑุณู ุงูุจูุงูู)
- ุขุฎุฑ 7 ุฃูุงู
- ุนุฏุฏ ุงูุฒูุงุฑ ุงููุฑูุฏูู ููููุงู
- ุนุฏุฏ ูุดุงูุฏุงุช ุงูุตูุญุงุช ููููุงู
- ุฑุณู ุจูุงูู ุชูุงุนูู

#### 3. ุงููุชุจ ุงูุฃูุซุฑ ูุดุงูุฏุฉ
- ูุงุฆูุฉ ุจุฃูุซุฑ 5 ูุชุจ ุฒูุงุฑุฉ
- ุนุฏุฏ ุงููุดุงูุฏุงุช ููู ูุชุงุจ
- ูู ุจูุงูุงุช `VisitorLog` ุงูุญููููุฉ

#### 4. ุงููุดุงุท ุงูุฃุฎูุฑ
- ุขุฎุฑ 10 ุฃุญุฏุงุซ
- ููุน ุงููุดุงุท (ุฒูุงุฑุฉ ุตูุญุฉุ ูุฑุงุกุฉ ูุชุงุจุ ุนูุงูุฉ ูุฑุฌุนูุฉ)
- ุงูููุช ููุฐ ุงูุญุฏุซ (ุจุงูุนุฑุจูุฉ)

#### 5. ุฅุญุตุงุฆูุงุช ุฅุถุงููุฉ
- ุฒูุงุฑ ูุฐุง ุงูุฃุณุจูุน
- ุฒูุงุฑ ูุฐุง ุงูุดูุฑ
- ุฅุฌูุงูู ุงูุนูุงูุงุช ุงููุฑุฌุนูุฉ

### ูููุฒุงุช ููุญุฉ ุงูุชุญูู:

โ **ุชุญุฏูุซ ุชููุงุฆู**: ุงูุจูุงูุงุช ุชุชุญุฏุซ ูุน ูู ุชุญุฏูุซ ููุตูุญุฉ
โ **ูุชุฑุงุช ุฒูููุฉ ูุฎุชููุฉ**: ุฃุณุจูุนุ ุดูุฑุ ุณูุฉ
โ **ุชุตุฏูุฑ ุงูุจูุงูุงุช**: CSV export ููุฅุญุตุงุฆูุงุช
โ **ูุงุฌูุฉ ุนุฑุจูุฉ**: ูู ุงููุตูุต ุจุงูุนุฑุจูุฉ
โ **ุชุตููู ุฅุณูุงูู**: ูุชูุงุณู ูุน ุชุตููู ุงููููุน

---

## ๐ ุขููุฉ ุนูู ุงููุธุงู

### ุชุฏูู ุงูุจูุงูุงุช:

```
1. ูุณุชุฎุฏู ูุฒูุฑ ุตูุญุฉ
       โ
2. useVisitorTracking ูุชู ุชุดุบููู
       โ
3. ุฅุฑุณุงู POST request ุฅูู /api/visitor/track
       โ
4. ุชุณุฌูู ูู VisitorLog
       โ
5. ุชุญุฏูุซ DailyStats ุชููุงุฆูุงู
       โ
6. ุญูุธ Session ID ูู Cookie
       โ
7. ุนุฑุถ ุงูุจูุงูุงุช ูู ููุญุฉ ุงูุชุญูู
```

### ูุซุงู ุนููู:

**ุฒุงุฆุฑ ุฌุฏูุฏ ูุฏุฎู ุงููููุน**:

1. **ุงูุฏุฎูู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ**:
   - ูุชู ุฅูุดุงุก `sessionId` ุฌุฏูุฏ: `visitor_1704297600_abc123`
   - ุชุณุฌูู ูู `VisitorLog`:
     ```json
     {
       "sessionId": "visitor_1704297600_abc123",
       "page": "/",
       "action": "page_view",
       "ipAddress": "192.168.1.1",
       "timestamp": "2026-01-03T10:00:00Z"
     }
     ```
   - ุชุญุฏูุซ `DailyStats` ููููู:
     ```json
     {
       "date": "2026-01-03",
       "uniqueVisitors": 15,  // +1
       "totalPageViews": 142  // +1
     }
     ```

2. **ุงูููุฑ ุนูู ูุชุงุจ**:
   - ููุณ `sessionId` (ูู Cookie)
   - ุชุณุฌูู ุฌุฏูุฏ ูู `VisitorLog`:
     ```json
     {
       "sessionId": "visitor_1704297600_abc123",
       "page": "/books/cmjy3t8430009ers39rwp5534",
       "action": "page_view"
     }
     ```
   - `DailyStats.totalPageViews` ูุฒูุฏ +1
   - `DailyStats.uniqueVisitors` ูุจูู ููุณู (ููุณ ุงูุฒุงุฆุฑ)

3. **ุนุฑุถ ูู ููุญุฉ ุงูุชุญูู**:
   - ุฅุฌูุงูู ุงูุฒูุงุฑ: ูุฒูุฏ ุจู 1
   - ุฒูุงุฑ ุงูููู: ูุฒูุฏ ุจู 1
   - ุงููุชุจ ุงูุฃูุซุฑ ูุดุงูุฏุฉ: ูุธูุฑ ุงููุชุงุจ ุงูููุชูุญ
   - ุงููุดุงุท ุงูุฃุฎูุฑ: ูุธูุฑ "ูุฑุงุกุฉ ูุชุงุจ - ููุฐ ุงูุขู"

---

## ๐ฏ ุงูููุงุฆุฏ ูุงููุฒุงูุง

### ูููุณุคูู (Admin):

โ **ูุนุฑูุฉ ุฏูููุฉ ุจุงูุฒูุงุฑ**
- ุนุฏุฏ ุงูุฒูุงุฑ ุงูุญูููู
- ุฃููุงุท ุงูุฒูุงุฑุฉ
- ุงูุฃููุงุช ุงูุฃูุซุฑ ูุดุงุทุงู

โ **ุชุญููู ุงููุญุชูู**
- ุงููุชุจ ุงูุฃูุซุฑ ุดุนุจูุฉ
- ุงูุตูุญุงุช ุงูุฃูุซุฑ ุฒูุงุฑุฉ
- ุณููู ุงููุณุชุฎุฏููู

โ **ุงุชุฎุงุฐ ูุฑุงุฑุงุช ูุฏุฑูุณุฉ**
- ูุง ุงููุชุจ ุงูุชู ูุฌุจ ุฅุถุงูุชูุงุ
- ูุง ุงูุชุตูููุงุช ุงููุทููุจุฉุ
- ูุชู ุชุญุฏูุซ ุงููุญุชููุ

### ูููุธุงู:

โ **ุฃุฏุงุก ูุญุณูู**
- ุงุณุชุนูุงูุงุช ุณุฑูุนุฉ ูู `DailyStats`
- ููุฑุณุฉ ุนูู `timestamp` ู `sessionId`
- ุชุฌููุน ุงูุจูุงูุงุช ูุณุจูุงู

โ **ูุงุจููุฉ ุงูุชูุณุน**
- ูููู ุฅุถุงูุฉ ุฃููุงุน ุฃูุดุทุฉ ุฌุฏูุฏุฉ
- ูููู ุชุชุจุน ุฃุญุฏุงุซ ูุฎุตุตุฉ
- ุณูููุฉ ุงูุชูุงูู ูุน ุฃุฏูุงุช ุฃุฎุฑู

โ **ุฎุตูุตูุฉ ูุฃูุงู**
- ูุง ูุชู ุชุฎุฒูู ูุนูููุงุช ุดุฎุตูุฉ
- Session IDs ุนุดูุงุฆูุฉ
- ุนููุงู IP ุงุฎุชูุงุฑู

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุงูุชุชุจุน ุงูุฃุณุงุณู:
```bash
# ุงูุชุญ ุงููุชุตูุญ ุนูู
http://localhost:3000

# ุงูุชุญ Developer Console
# ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก
# ุชุญูู ูู ูุฌูุฏ Cookie ุงุณููุง visitor_session
```

### 2. ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```bash
# ุงูุชุญ Prisma Studio
npx prisma studio

# ุชุญูู ูู ุฌุฏุงูู:
# - VisitorLog: ูุฌุจ ุฃู ูุญุชูู ุนูู ุณุฌูุงุช ุฌุฏูุฏุฉ
# - DailyStats: ูุฌุจ ุฃู ูุญุชูู ุนูู ุฅุญุตุงุฆูุงุช ุงูููู
```

### 3. ุงุฎุชุจุงุฑ ููุญุฉ ุงูุชุญูู:
```bash
# ุงูุชุญ
http://localhost:3000/secret-admin-panel-xyz/analytics

# ุชุญูู ูู:
# - ุนุฑุถ ุงูุจูุงูุงุช ุงูุญููููุฉ (ูููุณ 0)
# - ุงูุฅุญุตุงุฆูุงุช ุงูููููุฉ ุชุธูุฑ
# - ุงููุดุงุท ุงูุฃุฎูุฑ ูุชุญุฏุซ
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงููุชูุฏูุฉ (ูุณุชูุจูุงู)

### ูููู ุฅุถุงูุฉ:

1. **ุชุชุจุน ุงูููุช ุงูููุถู**:
   - ูู ุฏูููุฉ ูุถู ุงููุณุชุฎุฏู ุนูู ูู ูุชุงุจ
   - ูุชูุณุท ููุช ุงููุฑุงุกุฉ ุงูุญูููู

2. **ุชุญููู ุงููููุน ุงูุฌุบุฑุงูู**:
   - ูู ุฃูู ูุฃุชู ุงูุฒูุงุฑุ
   - ุฃูุซุฑ ุงูุฏูู/ุงููุฏู ุฒูุงุฑุฉ

3. **ุชุญููู ุงูุฃุฌูุฒุฉ**:
   - ูู ูุณุชุฎุฏููู ุงูุฌูุงูุ
   - ูุง ุงููุชุตูุญุงุช ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงูุ

4. **ูุนุฏู ุงูุงุฑุชุฏุงุฏ (Bounce Rate)**:
   - ูู ุฒุงุฆุฑ ูุบุงุฏุฑ ูุจุงุดุฑุฉุ
   - ูุง ุงูุตูุญุงุช ุงูุชู ุชุญุชุงุฌ ุชุญุณููุ

5. **ูุณุงุฑุงุช ุงููุณุชุฎุฏู**:
   - ูุง ุงูุตูุญุงุช ุงูุชู ูุฒูุฑูุง ุงููุณุชุฎุฏู ุจุงูุชุฑุชูุจุ
   - ูุง ุงูุฑุญูุฉ ุงููุนุชุงุฏุฉ ูู ุงููููุนุ

---

## ๐๏ธ ุงูุตูุงูุฉ

### ุชูุธูู ุงูุจูุงูุงุช ุงููุฏููุฉ:

ูููู ุฅุถุงูุฉ ูููุฉ ุฏูุฑูุฉ (Cron Job) ูุญุฐู ุงูุจูุงูุงุช ุงููุฏููุฉ:

```typescript
// scripts/cleanup-old-logs.ts
// ุญุฐู ุณุฌูุงุช ุฃูุฏู ูู 90 ูููุงู
const threeMonthsAgo = new Date();
threeMonthsAgo.setMonth(threeMonthsAgo.getMonth() - 3);

await prisma.visitorLog.deleteMany({
  where: {
    timestamp: {
      lt: threeMonthsAgo,
    },
  },
});
```

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุจูุฌุงุญ ุชุทุจูู ูุธุงู ุชุชุจุน ุดุงูู ููุฒูุงุฑ ูููู ุจู:

โ ุชุณุฌูู ุฌููุน ุงูุฒูุงุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุงูููููุฉ ุชููุงุฆูุงู
โ ุนุฑุถ ุจูุงูุงุช ุญููููุฉ ูู ููุญุฉ ุงูุชุญูู
โ ุชุชุจุน ุงูุตูุญุงุช ุงูุฃูุซุฑ ุฒูุงุฑุฉ
โ ูุนุฑูุฉ ุงููุชุจ ุงูุฃูุซุฑ ุดุนุจูุฉ
โ ุนุฑุถ ุงููุดุงุท ูู ุงูููุช ุงููุนูู

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููุนูู ุจุดูู ูุงูู!**

---

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

1. โ `/app/api/visitor/track/route.ts` - API ููุชุชุจุน
2. โ `/app/api/analytics/route.ts` - API ุงูุฅุญุตุงุฆูุงุช (ูุญุฏูุซ)
3. โ `/lib/useVisitorTracking.ts` - Custom Hook
4. โ `/app/page.tsx` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
5. โ `/app/books/[id]/page.tsx` - ุตูุญุฉ ุงููุชุงุจ
6. โ `/app/about/page.tsx` - ุตูุญุฉ ูู ูุญู
7. โ `/app/contact/page.tsx` - ุตูุญุฉ ุงุชุตู ุจูุง
8. โ `/app/bookmarks/page.tsx` - ุตูุญุฉ ุงูุนูุงูุงุช ุงููุฑุฌุนูุฉ

---

**๐ ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู**

**ูุธุงู ุงูุชุชุจุน ุงูุขู ูุนูู ุจุดูู ูุซุงูู ููููุฑ ูุนูููุงุช ุฏูููุฉ ุนู ุฌููุน ุงูุฒูุงุฑ!**

*Last Updated: January 3, 2026*
