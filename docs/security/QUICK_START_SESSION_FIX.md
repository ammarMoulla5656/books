# ๐ ุฏููู ุงูุจุฏุก ุงูุณุฑูุน - ุฅุตูุงุญ ุงูุฌูุณุงุช

## ุฎุทูุงุช ุงูุชุทุจูู ุงูุณุฑูุนุฉ

### 1๏ธโฃ ุชุดุบูู Migration (ุฅูุฒุงูู)

```bash
# ุชุฃูุฏ ูู ุฃู PostgreSQL ูุนูู ุฃููุงู
# ุซู ุดุบูู:
npx prisma migrate deploy
```

ุฅุฐุง ููุช ูู ุจูุฆุฉ ุงูุชุทููุฑ:
```bash
npx prisma migrate dev
```

---

### 2๏ธโฃ ุฅุถุงูุฉ ุงููุชุบูุฑุงุช ุฅูู `.env`

ุฃุถู ูุฐู ุงูุฃุณุทุฑ ูู ููู `.env`:

```env
# Session Configuration
SESSION_DURATION_HOURS=24

# Cron Secret (ุงุฎุชูุงุฑู ููุขู)
CRON_SECRET=your_random_secret_here
```

ูุชูููุฏ CRON_SECRET:
```bash
openssl rand -hex 32
```

---

### 3๏ธโฃ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู

```bash
npm run build
npm start
```

ุฃู ูู ุงูุชุทููุฑ:
```bash
npm run dev
```

---

### 4๏ธโฃ ุงุฎุชุจุงุฑ ุฃู ูู ุดูุก ูุนูู

#### ุฃ) ุชุณุฌูู ุฏุฎูู
```bash
curl -X POST http://localhost:3000/api/admin/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@islamic-library.com","password":"YOUR_PASSWORD"}'
```

#### ุจ) ุงูุชุญูู ูู ุงูุฌูุณุฉ
```bash
# ุงูุชุญ ุงููุชุตูุญ ูุณุฌู ุฏุฎูู
# ุซู ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
psql -U postgres -d islamic_library -c "SELECT * FROM admin_sessions;"
```

ูุฌุจ ุฃู ุชุฑู ุฌูุณุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู!

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

### ูุงุฐุง ูุฌุจ ุฃู ูุญุฏุซ:

1. **ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู**:
   - ูุชู ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู `admin_sessions`
   - ูุชู ูุถุน cookie ุจุงุณู `admin_session`

2. **ุนูุฏ ุชุณุฌูู ุงูุฎุฑูุฌ**:
   - ูุชู ุญุฐู ุงูุณุฌู ูู `admin_sessions`
   - ูุชู ุญุฐู ุงูู cookie

3. **ุจุนุฏ 24 ุณุงุนุฉ**:
   - ุงูุฌูุณุฉ ุชูุชูู ุชููุงุฆูุงู
   - ุงููุณุชุฎุฏู ูุญุชุงุฌ ุชุณุฌูู ุฏุฎูู ุฌุฏูุฏ

4. **ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ**:
   - ุงูุฌูุณุงุช ูุง ุชูููุฏ! (ูุฃููุง ูุญููุธุฉ ูู DB)
   - ุงููุณุชุฎุฏููู ูุธููู ูุณุฌููู

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ: Migration ูุดู
```bash
# ุงูุญู: ุฃุนุฏ ุถุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
npx prisma migrate reset
npx prisma migrate deploy
```

### ุงููุดููุฉ: "Cannot find module crypto"
```bash
# ุงูุญู: crypto ูุฏูุฌ ูู Node.jsุ ููู ุชุฃูุฏ ูู ุงููุณุฎุฉ
node --version  # ูุฌุจ ุฃู ุชููู 18+
```

### ุงููุดููุฉ: ุงูุฌูุณุงุช ูุง ุชูุญุฐู ุชููุงุฆูุงู
- ูู ุชูุนูู cron job ุจุนุฏ (ุทุจูุนู)
- ุณูุชู ุญุฐููุง ุนูุฏ ุชุณุฌูู ุฏุฎูู ุฌุฏูุฏ
- ุฃู ุณุชูุญุฐู ุนูุฏ ูุญุงููุฉ ุงุณุชุฎุฏุงููุง

---

## ๐ ูุงุฆูุฉ ุงูุชุญูู ุงูุณุฑูุนุฉ

- [ ] PostgreSQL ูุนูู
- [ ] Migration ูุฌุญ (`npx prisma migrate deploy`)
- [ ] `.env` ูุญุชูู ุนูู `SESSION_DURATION_HOURS=24`
- [ ] ุงูุชุทุจูู ูุนูู
- [ ] ุชุณุฌูู ุงูุฏุฎูู ููุฌุญ
- [ ] ุงูุฌูุณุฉ ุชุธูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุชุณุฌูู ุงูุฎุฑูุฌ ูุญุฐู ุงูุฌูุณุฉ

---

## ๐ ุงูุฎุทูุงุช ุงูุงุฎุชูุงุฑูุฉ (ูููู ุชุฃุฌูููุง)

### ุฅุนุฏุงุฏ Cron Job ููุชูุธูู
ููููู ุฅุนุฏุงุฏู ูุงุญูุงูุ ุบูุฑ ุฅูุฒุงูู ุงูุขู.

ุฑุงุฌุน: [SESSION_MANAGEMENT_FIX.md](./SESSION_MANAGEMENT_FIX.md#-ุงูุชุซุจูุช-ูุงูุฅุนุฏุงุฏ) ููุชูุงุตูู.

---

## ๐ ูู ุญุงู ูุฌูุฏ ูุดุงูู

1. ุชุญูู ูู logs: `npm run dev` ูุดุงูุฏ ุงูู console
2. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: `npx prisma studio`
3. ุฑุงุฌุน ุงูุชูุซูู ุงููุงูู: [SESSION_MANAGEMENT_FIX.md](./SESSION_MANAGEMENT_FIX.md)

---

**ูุฐุง ูู ุดูุก! ุงูุฌูุณุงุช ุงูุขู ุขููุฉ ููุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ๐**
