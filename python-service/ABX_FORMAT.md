# صيغة ABX - دليل التنسيق

صيغة ABX هي تنسيق مرن لملفات الكتب الإلكترونية التي تدعم استخراج محتوى منظم وسهل المعالجة.

## أنواع ملفات ABX المدعومة

### 1. ABX كملف ZIP (الموصى به للكتب المعقدة)

ملف ZIP يحتوي على البنية التالية:

```
book.abx
├── metadata.json          (اختياري)
├── chapters/
│   ├── 01_intro.txt
│   ├── 02_chapter1.txt
│   ├── 03_chapter2.txt
│   └── ...
└── content.txt            (للملفات البسيطة)
```

#### ملف metadata.json (اختياري)

```json
{
  "title": "عنوان الكتاب",
  "author": "اسم المؤلف",
  "publisher": "الناشر",
  "year": 2024,
  "language": "ar",
  "description": "وصف الكتاب"
}
```

#### محتوى ملفات الفصول

كل ملف نصي يمكن أن يحتوي على:
- عنوان الفصل (في السطر الأول أو مع `#`)
- محتوى الفصل النصي
- يتم الفصل بين الفصول تلقائياً بناءً على الملفات

### 2. ABX كملف نص عادي (للكتب البسيطة)

تنسيق نصي بسيط:

```
---
title=عنوان الكتاب
author=اسم المؤلف
year=2024
---

# محتوى الكتاب

النص الكامل للكتاب...
```

أو بصيغة JSON:

```
---
{
  "title": "عنوان الكتاب",
  "author": "اسم المؤلف"
}
---

محتوى الكتاب الكامل...
```

## خصائص صيغة ABX

### المميزات
- ✅ دعم الملفات الكبيرة (حتى 100 ميجابايت)
- ✅ دعم البيانات الوصفية (Metadata)
- ✅ تنسيق مرن وسهل التعديل
- ✅ يدعم الهياكل المعقدة (عدة فصول وأقسام)
- ✅ متوافق مع الترميز UTF-8

### الترميز
- يجب أن يكون التنسيق بـ UTF-8
- يدعم النصوص العربية كاملة

## أمثلة

### مثال 1: كتاب بسيط كملف نص

```abx
---
title=مقدمة في الدين الإسلامي
author=أحمد محمد علي
year=2024
---

# الفصل الأول: مقدمة

هذا الفصل يحتوي على مقدمة الكتاب...

# الفصل الثاني: الأساسيات

محتوى الفصل الثاني...
```

### مثال 2: كتاب معقد كـ ZIP

الملفات المطلوبة:
- `book.abx` (ملف ZIP)
- `metadata.json`:
  ```json
  {
    "title": "تاريخ الإسلام",
    "author": "الطبري",
    "chapters": 50
  }
  ```
- `chapters/01_مقدمة.txt`
- `chapters/02_الحقبة_الأولى.txt`
- إلخ...

## عملية المعالجة

عند رفع ملف ABX:

1. **التحقق**: التأكد من أن الملف صحيح
2. **الاستخراج**: قراءة البيانات والمحتوى
3. **المعالجة**: كشف الفهرس وتنظيم المحتوى
4. **المراجعة**: عرض النتائج للمستخدم
5. **الحفظ**: إنشاء الكتاب في قاعدة البيانات

## الأخطاء الشائعة

| المشكلة | الحل |
|--------|------|
| الملف لم يتم فتحه | تأكد من أن الملف بصيغة .abx وليس معطوباً |
| عدم قراءة البيانات الوصفية | استخدم JSON صحيح في metadata.json |
| مشاكل في الترميز | تأكد من استخدام UTF-8 |
| لا يتم استخراج المحتوى | تأكد من وجود ملفات .txt في المجلد |

## الحد الأقصى للملفات

- حجم الملف الواحد: **100 ميجابايت**
- عدد الفصول: **غير محدود**
- طول النص: **غير محدود**

## نصائح

1. استخدم أسماء واضحة للملفات داخل ZIP
2. ترتب الفصول بالأرقام (01_, 02_, إلخ) للحفاظ على الترتيب
3. استخدم البيانات الوصفية لإضافة معلومات إضافية
4. اختبر الملف قبل الرفع للتأكد من صحته

---

للمزيد من المعلومات، راجع دليل استخدام نظام رفع الملفات.
